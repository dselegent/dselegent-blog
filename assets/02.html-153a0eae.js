import{ab as p,G as o,H as c,E as n,S as s,N as t,ac as e,W as l}from"./framework-844b12a4.js";const i={},u=n("h1",{id:"_02-ã€ä½¿ç”¨é¢„åŠ è½½è„šæœ¬ã€‘",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_02-ã€ä½¿ç”¨é¢„åŠ è½½è„šæœ¬ã€‘","aria-hidden":"true"},"#"),s(" 02 ã€ä½¿ç”¨é¢„åŠ è½½è„šæœ¬ã€‘")],-1),r=n("h2",{id:"_1-ä»€ä¹ˆæ˜¯é¢„åŠ è½½è„šæœ¬",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-ä»€ä¹ˆæ˜¯é¢„åŠ è½½è„šæœ¬","aria-hidden":"true"},"#"),s(" 1.ä»€ä¹ˆæ˜¯é¢„åŠ è½½è„šæœ¬ï¼Ÿ")],-1),d={href:"https://www.electronjs.org/zh/docs/latest/api/app",target:"_blank",rel:"noopener noreferrer"},k={href:"https://nodejs.org/dist/latest/docs/api/",target:"_blank",rel:"noopener noreferrer"},v=n("p",null,[s("ä¸ºäº†å°† Electron çš„ä¸åŒç±»å‹çš„è¿›ç¨‹æ¡¥æ¥åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨è¢«ç§°ä¸º "),n("strong",null,"é¢„åŠ è½½"),s(" çš„ç‰¹æ®Šè„šæœ¬ã€‚")],-1),m=n("h2",{id:"_2-ä½¿ç”¨é¢„åŠ è½½è„šæœ¬æ¥å¢å¼ºæ¸²æŸ“å™¨",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_2-ä½¿ç”¨é¢„åŠ è½½è„šæœ¬æ¥å¢å¼ºæ¸²æŸ“å™¨","aria-hidden":"true"},"#"),s(" 2.ä½¿ç”¨é¢„åŠ è½½è„šæœ¬æ¥å¢å¼ºæ¸²æŸ“å™¨")],-1),h=n("p",null,"BrowserWindow çš„é¢„åŠ è½½è„šæœ¬è¿è¡Œåœ¨å…·æœ‰ HTML DOM å’Œ Node.jsã€Electron API çš„æœ‰é™å­é›†è®¿é—®æƒé™çš„ç¯å¢ƒä¸­ã€‚",-1),g=n("p",null,[n("strong",null,"é¢„åŠ è½½è„šæœ¬æ²™ç›’åŒ–")],-1),_=n("p",null,[s("ä» Electron 20 å¼€å§‹ï¼Œé¢„åŠ è½½è„šæœ¬é»˜è®¤ "),n("strong",null,"æ²™ç›’åŒ–"),s(" ï¼Œä¸å†æ‹¥æœ‰å®Œæ•´ Node.js ç¯å¢ƒçš„è®¿é—®æƒã€‚ å®é™…ä¸Šï¼Œè¿™æ„å‘³ç€ä½ åªæ‹¥æœ‰ä¸€ä¸ª polyfilled çš„ "),n("code",null,"require"),s(" å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åªèƒ½è®¿é—®ä¸€ç»„æœ‰é™çš„ APIã€‚")],-1),b=n("thead",null,[n("tr",null,[n("th",null,"å¯ç”¨çš„ API"),n("th",null,"è¯¦ç»†ä¿¡æ¯")])],-1),f=n("tr",null,[n("td",null,"Electron æ¨¡å—"),n("td",null,"æ¸²æŸ“è¿›ç¨‹æ¨¡å—")],-1),w=n("td",null,"Node.js æ¨¡å—",-1),j={href:"https://nodejs.org/api/events.html",target:"_blank",rel:"noopener noreferrer"},y=n("code",null,"events",-1),x={href:"https://nodejs.org/api/timers.html",target:"_blank",rel:"noopener noreferrer"},q=n("code",null,"timers",-1),E={href:"https://nodejs.org/api/url.html",target:"_blank",rel:"noopener noreferrer"},B=n("code",null,"url",-1),I=n("td",null,"Polyfilled çš„å…¨å±€æ¨¡å—",-1),N={href:"https://nodejs.org/api/buffer.html",target:"_blank",rel:"noopener noreferrer"},P=n("code",null,"Buffer",-1),M={href:"https://www.electronjs.org/zh/docs/latest/api/process",target:"_blank",rel:"noopener noreferrer"},W=n("code",null,"process",-1),C={href:"https://nodejs.org/api/timers.html#timers_clearimmediate_immediate",target:"_blank",rel:"noopener noreferrer"},R=n("code",null,"clearImmediate",-1),T={href:"https://nodejs.org/api/timers.html#timers_setimmediate_callback_args",target:"_blank",rel:"noopener noreferrer"},z=n("code",null,"setImmediate",-1),S={href:"https://www.electronjs.org/zh/docs/latest/tutorial/sandbox",target:"_blank",rel:"noopener noreferrer"},D={href:"https://developer.chrome.com/docs/extensions/mv3/content_scripts/",target:"_blank",rel:"noopener noreferrer"},L={href:"https://www.electronjs.org/zh/docs/latest/api/context-bridge",target:"_blank",rel:"noopener noreferrer"},A={href:"https://developer.mozilla.org/en-US/docs/Glossary/Global_object",target:"_blank",rel:"noopener noreferrer"},H=e(`<p>ä¸ºäº†æ¼”ç¤ºè¿™ä¸€æ¦‚å¿µï¼Œä½ å°†ä¼šåˆ›å»ºä¸€ä¸ªå°†åº”ç”¨ä¸­çš„ Chromeã€Nodeã€Electron ç‰ˆæœ¬å·æš´éœ²è‡³æ¸²æŸ“å™¨çš„é¢„åŠ è½½è„šæœ¬</p><p>æ–°å»ºä¸€ä¸ª <code>preload.js</code> æ–‡ä»¶ã€‚è¯¥è„šæœ¬é€šè¿‡ <code>versions</code> è¿™ä¸€å…¨å±€å˜é‡ï¼Œå°† Electron çš„ <code>process.versions</code> å¯¹è±¡æš´éœ²ç»™æ¸²æŸ“å™¨ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> contextBridge <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;electron&#39;</span><span class="token punctuation">)</span>

contextBridge<span class="token punctuation">.</span><span class="token function">exposeInMainWorld</span><span class="token punctuation">(</span><span class="token string">&#39;versions&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">node</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span>versions<span class="token punctuation">.</span>node<span class="token punctuation">,</span>
  <span class="token function-variable function">chrome</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span>versions<span class="token punctuation">.</span>chrome<span class="token punctuation">,</span>
  <span class="token function-variable function">electron</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span>versions<span class="token punctuation">.</span>electron<span class="token punctuation">,</span>
  <span class="token comment">// èƒ½æš´éœ²çš„ä¸ä»…ä»…æ˜¯å‡½æ•°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æš´éœ²å˜é‡</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†å°†è„šæœ¬é™„åœ¨æ¸²æŸ“è¿›ç¨‹ä¸Šï¼Œåœ¨ BrowserWindow æ„é€ å™¨ä¸­ä½¿ç”¨ <code>webPreferences.preload</code> ä¼ å…¥è„šæœ¬çš„è·¯å¾„ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app<span class="token punctuation">,</span> BrowserWindow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;electron&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">createWindow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> win <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
    <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">preload</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;preload.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  win<span class="token punctuation">.</span><span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token string">&#39;index.html&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

app<span class="token punctuation">.</span><span class="token function">whenReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">createWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),O=n("p",null,[n("strong",null,"æç¤º")],-1),V=n("p",null,"è¿™é‡Œä½¿ç”¨äº†ä¸¤ä¸ªNode.jsæ¦‚å¿µï¼š",-1),F={href:"https://nodejs.org/api/modules.html#modules_dirname",target:"_blank",rel:"noopener noreferrer"},G=n("code",null,"__dirname",-1),U={href:"https://nodejs.org/api/path.html#path_path_join_paths",target:"_blank",rel:"noopener noreferrer"},$=n("code",null,"path.join",-1),X=n("code",null,"versions",-1),Y=n("code",null,"window.versions",-1),J=n("code",null,"versions",-1),K=n("code",null,"renderer.js",-1),Q={href:"https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById",target:"_blank",rel:"noopener noreferrer"},Z=n("code",null,"document.getElementById",-1),nn=n("code",null,"id",-1),sn=n("code",null,"info",-1),an=e(`<p><code>render.js</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> information <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;info&#39;</span><span class="token punctuation">)</span>
information<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">æœ¬åº”ç”¨æ­£åœ¨ä½¿ç”¨ Chrome (v</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>versions<span class="token punctuation">.</span><span class="token function">chrome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">), Node.js (v</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>versions<span class="token punctuation">.</span><span class="token function">node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">), å’Œ Electron (v</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>versions<span class="token punctuation">.</span><span class="token function">electron</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">\`</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åè¯·ä¿®æ”¹ä½ çš„ <code>index.html</code> æ–‡ä»¶ã€‚åŠ ä¸Šä¸€ä¸ª <code>id</code> å±æ€§ä¸º <code>info</code> çš„å…¨æ–°å…ƒç´ ï¼Œå¹¶ä¸”è®°å¾—åŠ ä¸Šä½ çš„ <code>renderer.js</code> è„šæœ¬ï¼š</p><p><code>index.html</code></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
      <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Content-Security-Policy<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default-src &#39;self&#39;; script-src &#39;self&#39;<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
      <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-Content-Security-Policy<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default-src &#39;self&#39;; script-src &#39;self&#39;<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>æ¥è‡ª Electron æ¸²æŸ“å™¨çš„é—®å¥½ï¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>æ¥è‡ª Electron æ¸²æŸ“å™¨çš„é—®å¥½ï¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>ğŸ‘‹<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./render.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åšå®Œè¿™å‡ æ­¥ä¹‹åï¼Œä½ çš„åº”ç”¨åº”è¯¥é•¿è¿™æ ·ï¼š</p><h2 id="_3-åœ¨è¿›ç¨‹ä¹‹é—´é€šä¿¡" tabindex="-1"><a class="header-anchor" href="#_3-åœ¨è¿›ç¨‹ä¹‹é—´é€šä¿¡" aria-hidden="true">#</a> 3.åœ¨è¿›ç¨‹ä¹‹é—´é€šä¿¡</h2><p>æˆ‘ä»¬ä¹‹å‰æåˆ°ï¼ŒElectron çš„ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹æœ‰ç€æ¸…æ¥šçš„åˆ†å·¥å¹¶ä¸”ä¸å¯äº’æ¢ã€‚ è¿™ä»£è¡¨ç€æ— è®ºæ˜¯ä»æ¸²æŸ“è¿›ç¨‹ç›´æ¥è®¿é—® Node.js æ¥å£ï¼Œäº¦æˆ–è€…æ˜¯ä»ä¸»è¿›ç¨‹è®¿é—® HTML æ–‡æ¡£å¯¹è±¡æ¨¡å‹ (DOM)ï¼Œéƒ½æ˜¯ä¸å¯èƒ½çš„ã€‚</p><p>è§£å†³è¿™ä¸€é—®é¢˜çš„æ–¹æ³•æ˜¯ä½¿ç”¨è¿›ç¨‹é—´é€šä¿¡ (IPC)ã€‚å¯ä»¥ä½¿ç”¨ Electron çš„ <code>ipcMain</code> æ¨¡å—å’Œ <code>ipcRenderer</code> æ¨¡å—æ¥è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡ã€‚ ä¸ºäº†ä»ä½ çš„ç½‘é¡µå‘ä¸»è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>ipcMain.handle</code> è®¾ç½®ä¸€ä¸ªä¸»è¿›ç¨‹å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰ï¼Œç„¶ååœ¨é¢„å¤„ç†è„šæœ¬ä¸­æš´éœ²ä¸€ä¸ªè¢«ç§°ä¸º <code>ipcRenderer.invoke</code> çš„å‡½æ•°æ¥è§¦å‘è¯¥å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰ã€‚</p><p>æˆ‘ä»¬å°†å‘æ¸²æŸ“å™¨æ·»åŠ ä¸€ä¸ªå«åš <code>ping()</code> çš„å…¨å±€å‡½æ•°æ¥æ¼”ç¤ºè¿™ä¸€ç‚¹ã€‚è¿™ä¸ªå‡½æ•°å°†è¿”å›ä¸€ä¸ªä»ä¸»è¿›ç¨‹ç¿»å±±è¶Šå²­è€Œæ¥çš„å­—ç¬¦ä¸²ã€‚</p><p>é¦–å…ˆï¼Œåœ¨é¢„å¤„ç†è„šæœ¬ä¸­è®¾ç½® <code>invoke</code> è°ƒç”¨ï¼š</p><p><code>preload.js</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> contextBridge<span class="token punctuation">,</span> ipcRenderer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;electron&#39;</span><span class="token punctuation">)</span>

contextBridge<span class="token punctuation">.</span><span class="token function">exposeInMainWorld</span><span class="token punctuation">(</span><span class="token string">&#39;versions&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">node</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span>versions<span class="token punctuation">.</span>node<span class="token punctuation">,</span>
  <span class="token function-variable function">chrome</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span>versions<span class="token punctuation">.</span>chrome<span class="token punctuation">,</span>
  <span class="token function-variable function">electron</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span>versions<span class="token punctuation">.</span>electron<span class="token punctuation">,</span>
  <span class="token function-variable function">ping</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> ipcRenderer<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token string">&#39;ping&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// èƒ½æš´éœ²çš„ä¸ä»…ä»…æ˜¯å‡½æ•°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æš´éœ²å˜é‡</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>IPC å®‰å…¨</strong></p><p>å¯ä»¥æ³¨æ„åˆ°æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°æ¥åŒ…è£¹ <code>ipcRenderer.invoke(&#39;ping&#39;)</code> è°ƒç”¨ï¼Œè€Œå¹¶éç›´æ¥é€šè¿‡ context bridge æš´éœ² <code>ipcRenderer</code> æ¨¡å—ã€‚ ä½ <strong>æ°¸è¿œ</strong>éƒ½ä¸è¦æƒ³é€šè¿‡é¢„åŠ è½½ç›´æ¥æš´éœ²æ•´ä¸ª <code>ipcRenderer</code> æ¨¡å—ï¼Œè¿™å°†ä½¿å¾—ä½ çš„æ¸²æŸ“å™¨èƒ½å¤Ÿç›´æ¥å‘ä¸»è¿›ç¨‹å‘é€ä»»æ„çš„ IPC ä¿¡æ¯ï¼Œä¼šä½¿å¾—å…¶æˆä¸ºæ¶æ„ä»£ç æœ€å¼ºæœ‰åŠ›çš„æ”»å‡»åª’ä»‹ã€‚</p></blockquote><p>ç„¶åï¼Œåœ¨ä¸»è¿›ç¨‹ä¸­è®¾ç½®ä½ çš„ <code>handle</code> ç›‘å¬å™¨ã€‚ æˆ‘ä»¬åœ¨ HTML æ–‡ä»¶åŠ è½½<em>ä¹‹å‰</em>å®Œæˆäº†è¿™äº›ï¼Œæ‰€ä»¥æ‰èƒ½ä¿è¯åœ¨ä½ ä»æ¸²æŸ“å™¨å‘é€ <code>invoke</code> è°ƒç”¨ä¹‹å‰å¤„ç†ç¨‹åºèƒ½å¤Ÿå‡†å¤‡å°±ç»ªã€‚</p><p><code>main.js</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> app<span class="token punctuation">,</span> BrowserWindow<span class="token punctuation">,</span> ipcMain <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;electron&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">createWindow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> win <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">800</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
    <span class="token literal-property property">webPreferences</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">preload</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;preload.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  ipcMain<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span><span class="token string">&#39;ping&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#39;pong&#39;</span><span class="token punctuation">)</span>
  win<span class="token punctuation">.</span><span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token string">&#39;index.html&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
app<span class="token punctuation">.</span><span class="token function">whenReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>createWindow<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†å‘é€å™¨ä¸æ¥æ”¶å™¨è®¾ç½®å®Œæˆä¹‹åï¼Œç°åœ¨ä½ å¯ä»¥å°†ä¿¡æ¯é€šè¿‡åˆšåˆšå®šä¹‰çš„ <code>&#39;ping&#39;</code> é€šé“ä»æ¸²æŸ“å™¨å‘é€è‡³ä¸»è¿›ç¨‹å½“ä¸­ã€‚</p><p><code>renderer.js</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">func</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> window<span class="token punctuation">.</span>versions<span class="token punctuation">.</span><span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token comment">// æ‰“å° &#39;pong&#39;</span>
<span class="token punctuation">}</span>

<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,20),tn=n("code",null,"ipcRenderer",-1),en=n("code",null,"ipcMain",-1),pn={href:"https://www.electronjs.org/zh/docs/latest/tutorial/ipc",target:"_blank",rel:"noopener noreferrer"},on=n("h2",{id:"_4-æ‘˜è¦",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_4-æ‘˜è¦","aria-hidden":"true"},"#"),s(" 4.æ‘˜è¦")],-1),cn=n("p",null,[s("é¢„åŠ è½½è„šæœ¬åŒ…å«åœ¨æµè§ˆå™¨çª—å£åŠ è½½ç½‘é¡µä¹‹å‰è¿è¡Œçš„ä»£ç ã€‚ å…¶å¯è®¿é—® DOM æ¥å£å’Œ Node.js ç¯å¢ƒï¼Œå¹¶ä¸”ç»å¸¸åœ¨å…¶ä¸­ä½¿ç”¨ "),n("code",null,"contextBridge"),s(" æ¥å£å°†ç‰¹æƒæ¥å£æš´éœ²ç»™æ¸²æŸ“å™¨ã€‚")],-1),ln=n("p",null,"ç”±äºä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹æœ‰ç€å®Œå…¨ä¸åŒçš„åˆ†å·¥ï¼ŒElectron åº”ç”¨é€šå¸¸ä½¿ç”¨é¢„åŠ è½½è„šæœ¬æ¥è®¾ç½®è¿›ç¨‹é—´é€šä¿¡ (IPC) æ¥å£ä»¥åœ¨ä¸¤ç§è¿›ç¨‹ä¹‹é—´ä¼ è¾“ä»»æ„ä¿¡æ¯ã€‚",-1);function un(rn,dn){const a=l("ExternalLinkIcon");return o(),c("div",null,[u,r,n("p",null,[s("Electron çš„ä¸»è¿›ç¨‹æ˜¯ä¸€ä¸ªæ‹¥æœ‰ç€å®Œå…¨æ“ä½œç³»ç»Ÿè®¿é—®æƒé™çš„ Node.js ç¯å¢ƒã€‚ é™¤äº† "),n("a",d,[s("Electron æ¨¡ç»„"),t(a)]),s(" ä¹‹å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ "),n("a",k,[s("Node.js å†…ç½®æ¨¡å—"),t(a)]),s(" å’Œæ‰€æœ‰é€šè¿‡ npm å®‰è£…çš„è½¯ä»¶åŒ…ã€‚ å¦ä¸€æ–¹é¢ï¼Œå‡ºäºå®‰å…¨åŸå› ï¼Œæ¸²æŸ“è¿›ç¨‹é»˜è®¤è·‘åœ¨ç½‘é¡µé¡µé¢ä¸Šï¼Œè€Œå¹¶é Node.jsé‡Œã€‚")]),v,m,h,n("blockquote",null,[g,_,n("table",null,[b,n("tbody",null,[f,n("tr",null,[w,n("td",null,[n("a",j,[y,t(a)]),s("ã€"),n("a",x,[q,t(a)]),s("ã€"),n("a",E,[B,t(a)])])]),n("tr",null,[I,n("td",null,[n("a",N,[P,t(a)]),s("ã€"),n("a",M,[W,t(a)]),s("ã€"),n("a",C,[R,t(a)]),s("ã€"),n("a",T,[z,t(a)])])])])]),n("p",null,[s("æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯» "),n("a",S,[s("æ²™ç›’è¿›ç¨‹"),t(a)]),s(" æ•™ç¨‹ã€‚")])]),n("p",null,[s("é¢„åŠ è½½è„šæœ¬åƒ Chrome æ‰©å±•çš„ "),n("a",D,[s("å†…å®¹è„šæœ¬"),t(a)]),s("ï¼ˆContent Scriptï¼‰ä¸€æ ·ï¼Œä¼šåœ¨æ¸²æŸ“å™¨çš„ç½‘é¡µåŠ è½½ä¹‹å‰æ³¨å…¥ã€‚ å¦‚æœä½ æƒ³å‘æ¸²æŸ“å™¨åŠ å…¥éœ€è¦ç‰¹æ®Šæƒé™çš„åŠŸèƒ½ï¼Œä½ å¯ä»¥é€šè¿‡ "),n("a",L,[s("contextBridge"),t(a)]),s(" æ¥å£å®šä¹‰ "),n("a",A,[s("å…¨å±€å¯¹è±¡"),t(a)]),s("ã€‚")]),H,n("blockquote",null,[O,V,n("ul",null,[n("li",null,[n("a",F,[G,t(a)]),s(" å­—ç¬¦ä¸²æŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œè„šæœ¬çš„è·¯å¾„ (åœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒæŒ‡å‘ä½ çš„é¡¹ç›®çš„æ ¹æ–‡ä»¶å¤¹)ã€‚")]),n("li",null,[n("a",U,[$,t(a)]),s(" API å°†å¤šä¸ªè·¯å¾„è”ç»“åœ¨ä¸€èµ·ï¼Œåˆ›å»ºä¸€ä¸ªè·¨å¹³å°çš„è·¯å¾„å­—ç¬¦ä¸²ã€‚")])])]),n("p",null,[s("ç°åœ¨æ¸²æŸ“å™¨èƒ½å¤Ÿå…¨å±€è®¿é—® "),X,s(" äº†ï¼Œè®©æˆ‘ä»¬å¿«å¿«å°†é‡Œè¾¹çš„ä¿¡æ¯æ˜¾ç¤ºåœ¨çª—å£ä¸­ã€‚ è¿™ä¸ªå˜é‡ä¸ä»…å¯ä»¥é€šè¿‡ "),Y,s(" è®¿é—®ï¼Œä¹Ÿå¯ä»¥å¾ˆç®€å•åœ°ä½¿ç”¨ "),J,s(" æ¥è®¿é—®ã€‚ æ–°å»ºä¸€ä¸ª "),K,s(" è„šæœ¬ï¼Œ è¿™ä¸ªè„šæœ¬ä½¿ç”¨ "),n("a",Q,[Z,t(a)]),s(" DOM æ¥å£æ¥æ›¿æ¢ "),nn,s(" å±æ€§ä¸º "),sn,s(" çš„ HTML å…ƒç´ æ˜¾ç¤ºæ–‡æœ¬ã€‚")]),an,n("p",null,[s("å¦‚æ¬²äº†è§£ä½¿ç”¨ "),tn,s(" æ¨¡å—å’Œ "),en,s(" æ¨¡å—çš„è¯¦ç»†è¯´æ˜ï¼Œè¯·è®¿é—®å®Œæ•´çš„ "),n("a",pn,[s("è¿›ç¨‹é—´é€šä¿¡"),t(a)]),s(" æŒ‡å—ã€‚")]),on,cn,ln])}const vn=p(i,[["render",un],["__file","02.html.vue"]]);export{vn as default};
